<Project>
    <!-- common package options -->
    <PropertyGroup>
        <NeutralLanguage>en-US</NeutralLanguage>
        <Company>Microsoft Corporation.</Company>
        <Product>Microsoft .NET</Product>
        <Authors>Microsoft</Authors>
        <Copyright>Â© Microsoft Corporation. All rights reserved.</Copyright>
        <ProjectUrl>https://asp.net</ProjectUrl>
        <RequireLicenseAcceptance>true</RequireLicenseAcceptance>
        <Serviceable Condition="'$(Configuration)' == 'Release'">true</Serviceable>
    </PropertyGroup>

    <!-- common build options -->
    <PropertyGroup>
        <WarningsAsErrors>true</WarningsAsErrors> <!-- make disabling warnings opt-out -->
        <CustomAfterMicrosoftCommonTargets>$(MSBuildThisFileDirectory)targets\Internal.AspNetCore.Common.targets</CustomAfterMicrosoftCommonTargets>
        <CustomAfterMicrosoftCommonCrossTargetingTargets>$(MSBuildThisFileDirectory)targets\Internal.AspNetCore.Common.targets</CustomAfterMicrosoftCommonCrossTargetingTargets>
    </PropertyGroup>

    <!-- version options -->
    <PropertyGroup>
        <!-- create second-based build number for local builds -->
        <_SecondBasedTimeStamp>$([System.DateTime]::UtcNow.Subtract($([System.DateTime]::Parse("2015-01-01"))).TotalSeconds.ToString())</_SecondBasedTimeStamp>
        <_SecondBasedTimeStamp>t$([System.Int64]::Parse($(_SecondBasedTimeStamp.Substring(0, $(_SecondBasedTimeStamp.IndexOf("."))))).ToString("x9"))</_SecondBasedTimeStamp>

        <!-- for aspnet CI -->
        <BuildNumber Condition="'$(BuildNumber)'==''">$(KOREBUILD_BUILD_NUMBER)</BuildNumber>

        <!-- fallback build number if not set by KoreBuild-->
        <BuildNumber Condition="'$(BuildNumber)'==''">$(_SecondBasedTimeStamp)</BuildNumber>

        <VersionSuffix Condition="'$(VersionSuffix)'!='' AND '$(BuildNumber)' != ''">$(VersionSuffix)-$(BuildNumber)</VersionSuffix>
        <VersionSuffix Condition="'$(VersionSuffix)'==''">$(BuildNumber)</VersionSuffix>

        <PackWithoutBuildNumber Condition="'$(PackWithoutBuildNumber)'==''">false</PackWithoutBuildNumber>
    </PropertyGroup>

    <!-- PackWithoutBuildNumber only works if 'VersionPrefix' is in use. -->
    <PropertyGroup Condition="$(PackWithoutBuildNumber) AND '$(VersionPrefix)' != ''">
        <PackageVersion>$(VersionPrefix)</PackageVersion>
        <PackageVersion Condition="'$(VersionSuffix)' != ''">$(PackageVersion)-$(VersionSuffix)-final</PackageVersion>
    </PropertyGroup>

</Project>